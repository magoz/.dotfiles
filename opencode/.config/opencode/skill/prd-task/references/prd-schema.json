{
  "prdName": "user-authentication",
  "tasks": [
    {
      "category": "functional",
      "description": "User can register with email and password",
      "steps": [
        "POST /api/auth/register with valid email/password",
        "Verify 201 response with user object",
        "Verify password is not in response",
        "Attempt duplicate email, verify 409 response",
        "Attempt invalid email, verify 400 response"
      ],
      "passes": false
    },
    {
      "category": "functional",
      "description": "User can log in and receive JWT token",
      "steps": [
        "POST /api/auth/login with valid credentials",
        "Verify 200 response with token",
        "Verify token contains userId and email claims",
        "Attempt invalid credentials, verify 401 response"
      ],
      "passes": false
    },
    {
      "category": "security",
      "description": "Passwords are securely hashed",
      "steps": [
        "Register a user",
        "Query database directly",
        "Verify password column contains bcrypt hash, not plaintext"
      ],
      "passes": false
    },
    {
      "category": "testing",
      "description": "Auth endpoints have comprehensive test coverage",
      "steps": [
        "Run test suite",
        "Verify registration tests exist and pass",
        "Verify login tests exist and pass",
        "Check coverage report shows >80% for auth modules"
      ],
      "passes": false
    }
  ],
  "context": {
    "patterns": [
      "API routes: src/routes/items.ts",
      "Validation: src/lib/validate.ts",
      "DB queries: src/db/queries/"
    ],
    "keyFiles": [
      "src/db/schema.ts",
      "src/routes/index.ts"
    ],
    "nonGoals": [
      "OAuth/social login",
      "Password reset",
      "Email verification"
    ]
  }
}
